

## 简介

### 操作系统与JVM I/O模型不匹配
* 操作系统移动的是大块数据，JVM喜欢操作小块数据，如单字节、几行文本
* 操作系统送来整块缓冲区数据，java.io在花费大量的时间把它们拆分成小块
* 操作系统喜欢整卡车运送数据，java.io喜欢用一铲子一铲子的加工数据

### I/O概念
* 缓冲区操作：所谓输入/输出就是把数据移进或移出缓冲区
* 用户空间：该区域执行的代码不能直接访问硬件设备
* 内核空间：能直接与硬件设备通信，控制用户空间的运行状态，所有的I/O都直接或间接通过内核空间
* 虚拟内存：使用虚拟地址取代物理地址
  * 多个虚拟地址可以指向一个物理地址（内存空间的多重映射）
  * 虚拟内存空间可以大于物理内存空间

> 磁盘控制器 -> 内核（缓冲区） -> 用户（缓冲区），原因是硬件不能直接访问用户空间，磁盘保存的是块数据，可能是不连续的，内核空间充当着数据分解，再组合的工作 

### 文件I/O
* 文件系统：定义了文件名、路径、文件、文件属性等抽象概念
* 文件锁定：允许一个进城组织器他进程存取某个文件，或限制其存取
	* 共享锁
	* 独占锁

## Buffer

### 属性

* capacity：缓冲区能够容纳数据的最大数量，在缓冲区创建时设定，无法修改

* limit：缓冲区中第一个不能被读/写的元素
* position：下一个可被读/写元素的索引位置，get()/put()会更新该值
* mark：一个备忘位置，mark()设定mark=position，reset()设定position=mark

> 0 <= mark <= position <= limit <= position







## Channel

## Selector
